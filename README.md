
# LumenMethodLab — быстрый расчёт освещения по люмен-методу + энергоблок

Небольшой проект «под GitHub», который можно реализовать за вечер. Показывает:
- расчёт требуемого количества светильников по **люмен-методу**;
- автоматическое предложение сетки размещения (ряды × столбцы) и проверку шага;
- прикидку **энергопотребления** и годовых затрат/выбросов CO₂;
- пакетную обработку CSV и маленький CLI.

> Образовательный проект. Для реальных проектов сверяйтесь с локальными нормами (например, EN 12464‑1/СП) и фотометрией конкретных светильников (IES/LDT).

## Формулы (суть)
- Площадь: `A = L × W`.

- Индекс помещения: `K = (L × W) / (Hm × (L + W))`, где `Hm = H_mnt - h_workplane - h_susp`.

- Требуемое число светильников: `N = ceil( E_target × A / (UF × MF × Φ ) )`, где `Φ` — световой поток одного светильника (лм), `UF` — коэффициент использования, `MF` — коэффициент запаса.

- Шаг размещения: стараемся держать `S ≤ SHR_max × Hm` (если задано).


## Быстрый старт
```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt

# одиночный расчёт через CLI
python lumen_method.py --length 8 --width 6 --height 3.2 --workplane 0.8 --suspension 0.2   --target_lux 500 --lumens 3600 --mf 0.8 --uf auto --rho_c 0.7 --rho_w 0.5 --rho_f 0.2 --shr_max 1.5

# пакетный расчёт из CSV (см. examples/rooms.csv)
python scripts/batch_calc.py examples/rooms.csv results.csv
```

## Что даёт вывод
- `required_fixtures`: минимально необходимое количество светильников;

- `grid` (rows × cols) и предполагаемый шаг по осям X/Y;

- `estimated_UF` (если был `--uf auto`), `Hm`, `room_index`, `maint_factor`;

- годовое **энергопотребление** и затраты для заданных часов/тарифа (опционально).


## Пример (офис 8×6×3.2 м, 500 лк, светильник 3600 лм, MF 0.8, UF≈оценка)
```
N ≈ ceil( 500 * 48 / (0.6 * 0.8 * 3600) ) = 7  → предложенная сетка 2 × 4 (с резервом)
```
> В реальности UF зависит от фотометрии и отражательной способности. Здесь есть упрощённый оценщик UF по индексу помещения и отражениям.

## Мини‑энергоблок
- Мощность: `P_total = N × P_fixture`.
- Годовое потребление: `E_year = P_total × hours_year / 1000` (кВт⋅ч).
- Оценка затрат: `cost_year = E_year × tariff`.
- Оценка CO₂ (по сетевому фактору): `CO2_year = E_year × grid_factor` (кг CO₂/кВт⋅ч).

## Лицензия
MIT.
# lumenmetodlab
